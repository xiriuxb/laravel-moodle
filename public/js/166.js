"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[166,595],{8216:(t,a,e)=>{e.d(a,{Z:()=>o});var n=e(1519),i=e.n(n)()((function(t){return t[1]}));i.push([t.id,"button:hover box-icon[data-v-2951e5b2]{fill:#fff}",""]);const o=i},5357:(t,a,e)=>{e.d(a,{Z:()=>o});var n=e(1519),i=e.n(n)()((function(t){return t[1]}));i.push([t.id,".modal-mask[data-v-855cd5dc]{background-color:rgba(0,0,0,.5);display:flex;flex-direction:column;height:100%;left:0;margin:0;min-width:0;padding:12px;position:fixed;top:0;transition:opacity .3s ease;width:100%;z-index:9998}.modal-wrapper[data-v-855cd5dc]{flex:1 1 0;height:calc(100% - 50px);min-height:0;overflow:auto}.modal-wrapper div[data-v-855cd5dc]{margin:auto}",""]);const o=i},2166:(t,a,e)=>{e.r(a),e.d(a,{default:()=>u});var n=e(1565),i=e(7256),o=e(4595);const s={layout:i.default,components:{LoadingComponent:n.default,VerPagoModal:o.default},data:function(){return{pagoSeleccionado:null,showPagoModal:!1,matriculas:[],loading:!0,searchTerm:"",baseUrl:"/api/admin/matriculas/pendientes"}},created:function(){this.loadMatriculas()},methods:{loadMatriculas:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.baseUrl;this.loading=!0,axios.get(a).then((function(a){t.loading=!1,t.linksToPages=a.data.links,t.matriculas=a.data.matriculas})).catch((function(a){t.loading=!1,t.$toast.open({message:"Error al cargar",type:"error",duration:5e3})}))},openModalImage:function(t){this.pagoSeleccionado=t,this.showPagoModal=!0},updateMatricula:function(t,a){var e=this;this.loading=!0,axios.put(this.baseUrl,{matricula_id:t,estado:a}).then((function(t){e.loading=!1,e.$toast.open({message:t.data.matricula,type:"success",duration:5e3}),e.loadMatriculas()})).catch((function(t){e.loading=!1,e.$toast.open({message:"Error al actualizar",type:"error",duration:5e3})}))}}};var r=e(3379),l=e.n(r),c=e(8216),d={insert:"head",singleton:!1};l()(c.Z,d);c.Z.locals;const u=(0,e(1900).Z)(s,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{class:{disabled:t.loading},attrs:{id:"adminMatriculasPendientes"}},[e("AppHead",{attrs:{title:"Admin | Matriculas Pendientes"}}),t._v(" "),t.loading?e("loading-component",{attrs:{backgroundColor:"rgb(0 0 0 / 29%)",width:"100%",height:"100%",position:"fixed"}}):t._e(),t._v(" "),e("h2",[t._v("\n    Administración de matrículas pendientes\n  ")]),t._v(" "),e("div",{staticClass:"container"},[e("table",{staticClass:"table"},[t._m(0),t._v(" "),e("tbody",t._l(t.matriculas,(function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.pago.created_at.substring(0,a.pago.created_at.indexOf("T"))))]),t._v(" "),e("td",[t._v("\n            "+t._s(a.user.name+" "+a.user.last_name)+"\n          ")]),t._v(" "),e("td",[t._v(t._s(a.cursos.fullname))]),t._v(" "),e("td",[t._v("($ "+t._s(a.pago.amount)+")"),e("a",{staticClass:"text-cyan-600 hover:underline cursor-pointer",attrs:{href:"#"},on:{click:function(e){return t.openModalImage(a.pago.id)}}},[t._v("Ver")])]),t._v(" "),e("td",[e("div",{staticClass:"d-flex flex-row"},[t.setting?e("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v(" "),e("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{tooltip:"Aceptar"},on:{click:function(e){return e.preventDefault(),t.updateMatricula(a.id,1)}}},[e("box-icon",{staticClass:"fill-blue-800",attrs:{name:"check"}})],1),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{tooltip:"Rechazar"},on:{click:function(e){return e.preventDefault(),t.updateMatricula(a.id,2)}}},[e("box-icon",{staticClass:"fill-red-600",attrs:{name:"x"}})],1)])])])})),0)])]),t._v(" "),t.showPagoModal?e("ver-pago-modal",{attrs:{pago_id:t.pagoSeleccionado},on:{close:function(a){t.showPagoModal=!1}}}):t._e()],1)}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",[t._v("Fecha")]),t._v(" "),e("th",[t._v("Usuario")]),t._v(" "),e("th",[t._v("Curso")]),t._v(" "),e("th",[t._v("Pago")]),t._v(" "),e("th",[t._v("Acciones")])])])}],!1,null,"2951e5b2",null).exports},4595:(t,a,e)=>{e.r(a),e.d(a,{default:()=>l});const n={props:{pago_id:{type:Number,required:!0}},data:function(){return{file_url:""}}};var i=e(3379),o=e.n(i),s=e(5357),r={insert:"head",singleton:!1};o()(s.Z,r);s.Z.locals;const l=(0,e(1900).Z)(n,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("transition",{attrs:{name:"modal"}},[e("div",{staticClass:"modal-mask"},[e("div",{staticClass:"d-flex flex-row-reverse"},[e("button",{staticClass:"btn"},[e("box-icon",{attrs:{name:"x",color:"#ffffff"},on:{click:function(a){return t.$emit("close")}}})],1)]),t._v(" "),e("div",{staticClass:"modal-wrapper"},[e("img",{attrs:{src:"/api/admin/matriculas/pendientes/imagen/"+t.pago_id}})])])])}),[],!1,null,"855cd5dc",null).exports}}]);