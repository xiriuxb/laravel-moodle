"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[453],{5453:(e,a,t)=>{t.r(a),t.d(a,{default:()=>r});var s=t(1565);const o={layout:t(7256).default,components:{LoadingComponent:s.default},data:function(){return{courses:[],linksToPages:[],loading:!0,searchTerm:"",baseUrl:"/api/admin/cursos-local"}},created:function(){this.loadCourses(),this.debouncedGetAnswer=_.debounce(this.loadCourses,500)},watch:{searchTerm:function(e,a){this.debouncedGetAnswer()}},methods:{loadCourses:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.baseUrl;(this.searchTerm.length>=2||""===this.searchTerm)&&(this.loading=!0,axios.get(a,{params:{search:this.searchTerm}}).then((function(a){e.loading=!1,e.linksToPages=a.data.links,e.courses=a.data.data})).catch((function(a){e.$toast.open({message:"Error al cargar los cursos",type:"error",duration:5e3})})))},setDestacado:function(e,a){var t=this;this.loading=!0,axios.post(this.baseUrl+"/destacado",{id:e,destacado:a}).then((function(e){t.loading=!1,t.loadCourses()})).catch((function(e){t.loading=!1,t.$toast.open({message:"Error al configurar",type:"error",duration:5e3})}))}}};const r=(0,t(1900).Z)(o,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{class:{disabled:e.loading},attrs:{id:"adminCourses"}},[t("AppHead",{attrs:{title:"Admin | Cursos (Local)"}}),e._v(" "),e.loading?t("loading-component",{attrs:{backgroundColor:"rgb(0 0 0 / 29%)",position:"fixed",width:"100%",height:"100%"}}):e._e(),e._v(" "),t("h2",[e._v("\r\n      Administración de cursos (Local)\r\n  ")]),e._v(" "),t("p",[e._v("En este apartado simplemente puede observar la información básica de los cursos, además de establecer como destacado. \r\n    Si desea modificar la información de los cursos debe hacerlo desde Moodle.\r\n  ")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Buscar curso",disabled:e.loading},domProps:{value:e.searchTerm},on:{input:function(a){a.target.composing||(e.searchTerm=a.target.value)}}}),e._v(" "),t("table",{staticClass:"table"},[e._m(0),e._v(" "),t("tbody",e._l(e.courses,(function(a){return t("tr",{key:a.id},[t("td",[e._v("\r\n            "+e._s(a.fullname)+"\r\n          ")]),e._v(" "),t("td",[e._v(e._s(a.shortname))]),e._v(" "),t("td",[e._v(e._s(a.category))]),e._v(" "),t("td",[e._v(e._s("1"==a.destacado?"Si":"No"))]),e._v(" "),t("td",[t("button",{class:1==a.destacado?"btn btn-outline-danger btn-acction":"btn btn-outline-primary btn-acction",attrs:{disabled:e.loading},on:{click:function(t){return t.preventDefault(),e.setDestacado(a.shortname,!a.destacado)}}},[e.loading?t("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):e._e(),e._v("\r\n              "+e._s(1==a.destacado?"No Destacar":"Destacar")+"\r\n            ")])])])})),0)]),e._v(" "),t("nav",{attrs:{"aria-label":"..."}},[t("ul",{staticClass:"pagination"},e._l(e.linksToPages,(function(a){return t("li",{key:a.label,staticClass:"page-item",class:a.active?"page-item active":null==a.url?"page-item disabled":"page-item"},[t("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1"},on:{click:function(t){return e.loadCourses(a.url)}}},[t("div",{domProps:{innerHTML:e._s(a.label)}})])])})),0)])],1)}),[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[e._v("Nombre")]),e._v(" "),t("th",{attrs:{scope:"col"}},[e._v("Nombre Corto")]),e._v(" "),t("th",{attrs:{scope:"col"}},[e._v("Categoria")]),e._v(" "),t("th",{attrs:{scope:"col"}},[e._v("Destacado")])])])}],!1,null,"141c0f60",null).exports}}]);