"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[487],{9487:(e,t,a)=>{a.r(t),a.d(t,{default:()=>r});var s=a(1565);const o={layout:a(5090).default,components:{LoadingComponent:s.default},data:function(){return{courses:[],linksToPages:[],loading:!0,searchTerm:""}},created:function(){this.loadCourses(),this.debouncedGetAnswer=_.debounce(this.loadCourses,500)},watch:{searchTerm:function(e,t){this.debouncedGetAnswer()}},methods:{loadCourses:function(){var e=this;(this.searchTerm.length>=2||""===this.searchTerm)&&(this.loading=!0,axios.get(this.route("admin.cursos.index",{search:this.searchTerm})).then((function(t){e.loading=!1,e.linksToPages=t.data.links,e.courses=t.data.data})).catch((function(t){e.$toast.open({message:"Error al cargar los cursos",type:"error",duration:5e3})})))},setDestacado:function(e,t){var a=this;this.loading=!0,axios.post(this.route("admin.set-destacado",{id:e,destacado:t})).then((function(e){a.loading=!1,a.loadCourses()})).catch((function(e){a.loading=!1,a.$toast.open({message:"Error al configurar",type:"error",duration:5e3})}))}}};const r=(0,a(1900).Z)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:{disabled:e.loading},attrs:{id:"adminCourses"}},[a("AppHead",{attrs:{title:"Admin | Cursos (Local)"}}),e._v(" "),e.loading?a("loading-component",{attrs:{backgroundColor:"rgb(0 0 0 / 29%)",position:"fixed",width:"100%",height:"100%"}}):e._e(),e._v(" "),a("h2",[e._v("\r\n      Administración de cursos (Local)\r\n  ")]),e._v(" "),a("p",[e._v("En este apartado simplemente puede observar la información básica de los cursos, además de establecer como destacado. \r\n    Si desea modificar la información de los cursos debe hacerlo desde Moodle.\r\n  ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Buscar curso",disabled:e.loading},domProps:{value:e.searchTerm},on:{input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}}),e._v(" "),a("table",{staticClass:"table"},[e._m(0),e._v(" "),a("tbody",e._l(e.courses,(function(t){return a("tr",{key:t.id},[a("td",[e._v("\r\n            "+e._s(t.fullname)+"\r\n          ")]),e._v(" "),a("td",[e._v(e._s(t.shortname))]),e._v(" "),a("td",[e._v(e._s(t.category))]),e._v(" "),a("td",[e._v(e._s("1"==t.destacado?"Si":"No"))]),e._v(" "),a("td",[a("button",{class:1==t.destacado?"btn btn-outline-danger":"btn btn-outline-primary",attrs:{disabled:e.loading},on:{click:function(a){return a.preventDefault(),e.setDestacado(t.shortname,!t.destacado)}}},[e.loading?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):e._e(),e._v("\r\n              "+e._s(1==t.destacado?"No Destacar":"Destacar")+"\r\n            ")])])])})),0)]),e._v(" "),a("nav",{attrs:{"aria-label":"..."}},[a("ul",{staticClass:"pagination"},e._l(e.linksToPages,(function(t){return a("li",{key:t.label,staticClass:"page-item",class:t.active?"page-item active":null==t.url?"page-item disabled":"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1"},on:{click:function(a){return e.loadCourses(t.url)}}},[a("div",{domProps:{innerHTML:e._s(t.label)}})])])})),0)])],1)}),[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[e._v("Nombre")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Nombre Corto")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Categoria")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Destacado")])])])}],!1,null,"463ae09c",null).exports}}]);