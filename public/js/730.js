"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[730],{7745:(t,e,a)=>{a.d(e,{Z:()=>n});var s=a(1519),o=a.n(s)()((function(t){return t[1]}));o.push([t.id,".container[data-v-74c903b2]{align-items:center;display:flex;flex-direction:column;position:relative}",""]);const n=o},9730:(t,e,a)=>{a.r(e),a.d(e,{default:()=>c});var s=a(1565);const o={layout:a(698).default,components:{LoadingComponent:s.default},data:function(){return{courses:[],loadingInit:!0,loading:!1,setting:!1,baseCursosUrl:"/api/admin/cursos-moodle",linksToPages:[],searchTerm:""}},created:function(){this.getCourses(),this.debouncedGetAnswer=_.debounce(this.getCourses,500)},watch:{searchTerm:function(t,e){this.debouncedGetAnswer()}},computed:{moodleUrl:function(){return this.$page.props.siteData.moodleUrl}},methods:{getCourses:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.baseCursosUrl;(this.searchTerm.length>=2||""===this.searchTerm)&&(this.loading=!0,axios.get(e,{params:{search:this.searchTerm}}).then((function(e){t.courses=e.data.data,t.linksToPages=e.data.links,t.loadingInit=t.loading=!1})).catch((function(e){t.$toast.open({message:"Error al cargar los cursos",type:"error",duration:5e3})})))},importar:function(t){var e=this;this.setting=!0,axios.post("/api/admin/cursos-local/importar",{shortname:t}).then((function(t){e.setting=!1,e.$toast.open({message:"Curso importados correctamente",type:"success",duration:5e3})})).catch((function(t){e.setting=!1,e.$toast.open({message:"Error al importar el curso",type:"error",duration:5e3})}))},redirectToMoodle:function(t){window.open=(this.moodleUrl,"_blank")}}};var n=a(3379),r=a.n(n),i=a(7745),l={insert:"head",singleton:!1};r()(i.Z,l);i.Z.locals;const c=(0,a(1900).Z)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"adminCMoodle"}},[a("AppHead",{attrs:{title:"Admin | Cursos (Moodle)"}}),t._v(" "),a("h2",[t._v("Administración de cursos (Moodle)")]),t._v(" "),a("p",[t._v("\n    En este apartado simplemente puede observar la información básica de los\n    cursos de Moodle, además de importarlos a la base de la app Octavario. Si\n    desea modificar la información de los cursos debe hacerlo desde Moodle.\n  ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Buscar curso",disabled:t.loading},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}),t._v(" "),t.loadingInit?a("loading-component"):a("div",{staticClass:"container"},[t.loading?a("loading-component",{attrs:{backgroundColor:"rgb(0 0 0 / 29%)",width:"100%",height:"100%"}}):t._e(),t._v(" "),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("Nombre")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Nombre Corto")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Importar?")]),t._v(" "),a("th",{attrs:{scope:"col"}},[t._v("Ver en Moodle")])])]),t._v(" "),a("tbody",{class:t.loading?"disabled":""},t._l(t.courses,(function(e){return a("tr",{key:e.shortname},[a("td",[t._v("\n            "+t._s(e.fullname)+"\n          ")]),t._v(" "),a("td",[t._v(t._s(e.shortname))]),t._v(" "),a("td",[a("button",{class:1==e.destacado?"btn btn-outline-danger btn-acction":"btn btn-outline-primary btn-acction",attrs:{disabled:t.setting},on:{click:function(a){return a.preventDefault(),t.importar(e.shortname)}}},[t.setting?a("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v("\n              Importar/Actualizar\n            ")])]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-primary",attrs:{disabled:t.setting},on:{click:function(a){return a.preventDefault(),t.redirectToMoodle(e.shortname)}}},[a("box-icon",{staticClass:"align-middle",attrs:{name:"link-external",color:"#fff"}})],1)])])})),0)]),t._v(" "),a("nav",{attrs:{"aria-label":"..."}},[a("ul",{staticClass:"pagination"},t._l(t.linksToPages,(function(e){return a("li",{key:e.label,staticClass:"page-item",class:e.active?"page-item active":null==e.url?"page-item disabled":"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#",tabindex:"-1"},on:{click:function(a){return t.getCourses(e.url)}}},[a("div",{domProps:{innerHTML:t._s(e.label)}})])])})),0)])],1)],1)}),[],!1,null,"74c903b2",null).exports}}]);