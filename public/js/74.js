"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[74,488],{8474:(t,a,n)=>{n.d(a,{Z:()=>o});var e=n(3645),i=n.n(e)()((function(t){return t[1]}));i.push([t.id,"button:hover box-icon[data-v-2621d8c8]{fill:#fff}",""]);const o=i},9308:(t,a,n)=>{n.d(a,{Z:()=>o});var e=n(3645),i=n.n(e)()((function(t){return t[1]}));i.push([t.id,".modal-mask[data-v-855cd5dc]{background-color:rgba(0,0,0,.5);display:flex;flex-direction:column;height:100%;left:0;margin:0;min-width:0;padding:12px;position:fixed;top:0;transition:opacity .3s ease;width:100%;z-index:9998}.modal-wrapper[data-v-855cd5dc]{flex:1 1 0;height:calc(100% - 50px);min-height:0;overflow:auto}.modal-wrapper div[data-v-855cd5dc]{margin:auto}",""]);const o=i},4074:(t,a,n)=>{n.r(a),n.d(a,{default:()=>u});var e=n(5368),i=n(9881),o=n(4488);const s={layout:i.default,components:{LoadingComponent:e.default,VerPagoModal:o.default},data:function(){return{pagoSeleccionado:null,showPagoModal:!1,matriculas:[],loadingInit:!0,setting:!1,searchTerm:"",baseUrl:"/api/admin/matriculas/pendientes"}},created:function(){this.loadMatriculas()},methods:{loadMatriculas:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.baseUrl;this.loadingInit=!0,axios.get(a).then((function(a){console.log(a.data),t.loadingInit=!1,t.linksToPages=a.data.links,t.matriculas=a.data.matriculas})).catch((function(a){t.loadingInit=!1,t.$toast.open({message:"Error al cargar",type:"error",duration:5e3})}))},openModalImage:function(t){this.pagoSeleccionado=t,this.showPagoModal=!0},updateMatricula:function(t,a){var n=this;this.setting=!0,axios.put(this.baseUrl,{matricula_id:t,estado:a}).then((function(t){n.setting=!1,n.$toast.open({message:t.data.matricula,type:"success",duration:5e3}),n.loadMatriculas()})).catch((function(t){n.setting=!1,n.$toast.open({message:"Error al actualizar",type:"error",duration:5e3})}))}}};var r=n(3379),l=n.n(r),c=n(8474),d={insert:"head",singleton:!1};l()(c.Z,d);c.Z.locals;const u=(0,n(1900).Z)(s,(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{attrs:{id:"adminMatriculasPendientes"}},[n("AppHead",{attrs:{title:"Admin | Matriculas Pendientes"}}),t._v(" "),n("h2",[t._v("\n    Administración de matrículas pendientes\n  ")]),t._v(" "),t.loadingInit?n("loading-component"):n("div",{staticClass:"container"},[t.setting?n("loading-component",{attrs:{backgroundColor:"rgb(0 0 0 / 29%)",width:"100%",height:"100%",position:"fixed"}}):t._e(),t._v(" "),n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("Fecha")]),t._v(" "),n("th",[t._v("Usuario")]),t._v(" "),n("th",[t._v("Curso")]),t._v(" "),n("th",[t._v("Pago")]),t._v(" "),n("th",[t._v("Acciones")])])]),t._v(" "),n("tbody",t._l(t.matriculas,(function(a){return n("tr",{key:a.id},[n("td",[t._v(t._s(a.pago.created_at.substring(0,a.pago.created_at.indexOf("T"))))]),t._v(" "),n("td",[t._v("\n            "+t._s(a.user.name+" "+a.user.last_name)+"\n          ")]),t._v(" "),n("td",[t._v(t._s(a.cursos.fullname))]),t._v(" "),n("td",[t._v("("+t._s(a.pago.amount)+")"),n("a",{staticClass:"text-cyan-600 hover:underline cursor-pointer",attrs:{href:"#"},on:{click:function(n){return t.openModalImage(a.pago.id)}}},[t._v("Ver")])]),t._v(" "),n("td",[n("div",{staticClass:"d-flex flex-row"},[t.setting?n("span",{staticClass:"spinner-border spinner-border-sm",attrs:{role:"status","aria-hidden":"true"}}):t._e(),t._v(" "),n("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{tooltip:"Aceptar"},on:{click:function(n){return n.preventDefault(),t.updateMatricula(a.id,1)}}},[n("box-icon",{staticClass:"fill-blue-800",attrs:{name:"check"}})],1),t._v(" "),n("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{tooltip:"Rechazar"},on:{click:function(n){return n.preventDefault(),t.updateMatricula(a.id,2)}}},[n("box-icon",{staticClass:"fill-red-600",attrs:{name:"x"}})],1)])])])})),0)])],1),t._v(" "),t.showPagoModal?n("ver-pago-modal",{attrs:{pago_id:t.pagoSeleccionado},on:{close:function(a){t.showPagoModal=!1}}}):t._e()],1)}),[],!1,null,"2621d8c8",null).exports},4488:(t,a,n)=>{n.r(a),n.d(a,{default:()=>l});const e={props:{pago_id:{type:Number,required:!0}},data:function(){return{file_url:""}}};var i=n(3379),o=n.n(i),s=n(9308),r={insert:"head",singleton:!1};o()(s.Z,r);s.Z.locals;const l=(0,n(1900).Z)(e,(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("transition",{attrs:{name:"modal"}},[n("div",{staticClass:"modal-mask"},[n("div",{staticClass:"d-flex flex-row-reverse"},[n("button",{staticClass:"btn"},[n("box-icon",{attrs:{name:"x",color:"#ffffff"},on:{click:function(a){return t.$emit("close")}}})],1)]),t._v(" "),n("div",{staticClass:"modal-wrapper"},[n("img",{attrs:{src:"/api/admin/matriculas/pendientes/imagen/"+t.pago_id}})])])])}),[],!1,null,"855cd5dc",null).exports}}]);